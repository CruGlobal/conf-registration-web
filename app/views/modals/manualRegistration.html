<form class="crs-form" name="simpleRegistrationForm" ng-submit="register()">
  <div class="modal-header">
    <button type="button" class="close" ng-click="$dismiss()">&times;</button>
    <h4 class="modal-title" translate>Add Registration</h4>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label class="control-label" translate>Type</label>
      <select
        show-errors
        class="form-control"
        ng-model="form.type"
        ng-change="adminEditRegistrant.registrantTypeId = form.type"
        ng-options="t.id as t.name for t in conference.registrantTypes | filter:excludeNonAllowedType"
        ng-disabled="fromGroupModal"
      ></select>
    </div>
    <div class="form-group">
      <label class="control-label" translate>First Name</label>
      <input
        show-errors
        class="form-control"
        type="text"
        ng-required="true"
        ng-model="form.first"
      />
    </div>
    <div class="form-group">
      <label class="control-label" translate>Last Name</label>
      <input
        show-errors
        class="form-control"
        type="text"
        ng-required="true"
        ng-model="form.last"
      />
    </div>
    <div class="form-group">
      <label class="control-label" translate>Email</label>
      <input
        show-errors
        class="form-control"
        type="email"
        ng-required="true"
        ng-model="form.email"
      />
      <span class="help-block help-block-hidden" translate
        >Please enter a valid email such as: example@example.com</span
      >
    </div>

    <!-- Spouse Registration Fields -->
    <div ng-if="showSpouseFields" class="spouse-registration-section">
      <hr />
      <h5 translate>Spouse Registration (Required)</h5>
      <div class="form-group">
        <label class="control-label" translate>Spouse First Name</label>
        <input
          show-errors
          class="form-control"
          type="text"
          ng-required="showSpouseFields"
          ng-model="spouseForm.first"
        />
      </div>
      <div class="form-group">
        <label class="control-label" translate>Spouse Last Name</label>
        <input
          show-errors
          class="form-control"
          type="text"
          ng-required="showSpouseFields"
          ng-model="spouseForm.last"
        />
      </div>
      <div class="form-group">
        <label class="control-label" translate>Spouse Email</label>
        <input
          show-errors
          class="form-control"
          type="email"
          ng-required="showSpouseFields"
          ng-model="spouseForm.email"
        />
        <span class="help-block help-block-hidden" translate
          >Please enter a valid email such as: example@example.com</span
        >
      </div>
    </div>

    <div ng-repeat="page in conference.registrationPages">
      <div
        ng-repeat="block in page.blocks"
        block="block"
        ng-if="blockIsVisible(block, adminEditRegistrant)"
        block-registration
      ></div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-default"
      ng-click="$dismiss()"
      translate
    >
      Close
    </button>
    <button
      type="submit"
      class="btn btn-success"
      ng-disabled="!simpleRegistrationForm.$valid || (showSpouseFields && (!spouseForm.first || !spouseForm.last || !spouseForm.email))"
      translate
    >
      Add Registration
    </button>
  </div>
</form>
