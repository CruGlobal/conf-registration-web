<div class="row" ng-show="currentRegistration.completed">
  <div class="well">
    <a class="btn btn-default pull-right" href="#/logout">Logout</a>
    <h4>You are registered!</h4>
    <p>Keep this information for your records.</p>
  </div>
</div>

<div class="row" ng-show="!currentRegistration.completed">
  <div class="well reg-not-complete">
    <h3>Your registration is not complete!</h3>
  </div>
</div>
<div class="row" ng-show="!currentRegistration.completed">
  <div class="well">
    <h4>Review Registration</h4>
    <p>Almost done. Please review your registration details below and click "Confirm" if correct.</p>
  </div>
</div>

<div class="row" ng-repeat="r in currentRegistration.registrants | orderBy: 'createdTimestamp'">
  <div class="well" ng-class="{'invalidBorder': regValidate[r.id].length}">
    <div class="pull-right" align="right" ng-show="currentRegistration.completed && conference.allowEditRegistrationAfterComplete">
      <input type="button" class="btn btn-small" ng-click="editRegistrant(r.id)" value="Edit">
    </div>

    <div class="pull-right" align="right" ng-show="!currentRegistration.completed">
      <input type="button" class="btn btn-small" ng-click="editRegistrant(r.id)" value="Edit">
      <input type="button" class="btn btn-small btn-danger" ng-click="removeRegistrant(r.id)" ng-show="conference.allowGroupRegistrations" value="Remove">

      <p class="registrantPrice">
        <strong ng-show="conference.registrantTypes.length > 1">{{getRegistrantType(r.registrantTypeId).name}}</strong>
        <span ng-show="r.calculatedTotalDue"><br>{{r.calculatedTotalDue | moneyFormat}}</span>
      </p>
    </div>

    <dl ng-repeat="block in blocks" ng-class="{'invalidBlock': isBlockInvalid(r.id, block.id)}" ng-show="blockInRegType(block, r.registrantTypeId)">
      <dt>{{block.title}}</dt>
      <dd><show-answer block="block" registrant="r" show-amount="true"></show-answer></dd>
    </dl>
  </div>
</div>

<div class="row" ng-show="!currentRegistration.completed && conference.allowGroupRegistrations">
  <div class="well">
    <p>Register another participant</p>
    <registration-type-select></registration-type-select>
  </div>
</div>


<div class="row" ng-show="conference.acceptCreditCards && currentRegistration.calculatedTotalDue > 0 && registerMode !== 'preview'">

  <div class="well">
    <h3>Payment Information</h3>
    <div ng-show="!currentRegistration.completed">
      <dl class="dl-horizontal">
        <dt>Payment amount</dt>
        <dd>
          <label>
          <input type="radio"
                 ng-model="currentPayment.amount"
                 ng-value="currentRegistration.calculatedMinimumDeposit">
          {{currentRegistration.calculatedMinimumDeposit | moneyFormat}}
          </label><br>
          <label ng-show="currentRegistration.calculatedTotalDue !== currentRegistration.calculatedMinimumDeposit">
            <input type="radio"
                   ng-model="currentPayment.amount"
                   ng-value="currentRegistration.calculatedTotalDue">
            {{currentRegistration.calculatedTotalDue | moneyFormat}}
          </label>
        </dd>
      </dl>

      <div ng-show="currentPayment.amount > 0">
        <label>Name on Card</label>
        <input type="text" ng-model="currentPayment.creditCard.nameOnCard" class="form-control" />

        <label>Card Number</label>
        <input type="text" maxlength="16" ng-model="currentPayment.creditCard.number" autocomplete="off" class="form-control" />

        <div class="row">
          <div class="col-xs-4">
            <label>Expiration Month</label>
            <select ng-model="currentPayment.creditCard.expirationMonth" class="form-control">
              <option value=''>Month</option>
              <option value='01'>01 - January</option>
              <option value='02'>02 - February</option>
              <option value='03'>03 - March</option>
              <option value='04'>04 - April</option>
              <option value='05'>05 - May</option>
              <option value='06'>06 - June</option>
              <option value='07'>07 - July</option>
              <option value='08'>08 - August</option>
              <option value='09'>09 - September</option>
              <option value='10'>10 - October</option>
              <option value='11'>11 - November</option>
              <option value='12'>12 - December</option>
            </select>
          </div>
          <div class="col-xs-3">
            <label>Expiration Year</label>
            <select ng-model="currentPayment.creditCard.expirationYear" class="form-control">
              <option value=''>Year</option>
              <option value='{{currentYear+$index}}' ng-repeat="t in [0,1,2,3,4,5]">{{currentYear+$index}}</option>
            </select>
          </div>
          <div class="col-xs-5">
            <label>Card CVV</label>
            <input class="form-control" type="text" maxlength="4" ng-model="currentPayment.creditCard.cvvNumber" autocomplete="off" />
          </div>
        </div>

        <br />

        <h3>Billing Address</h3>
        <label>Address</label>
        <input type="text" ng-model="currentPayment.creditCard.billingAddress" class="form-control" />
        <div class="row">
          <div class="col-sm-4">
            <label>City</label>
            <input type="text" ng-model="currentPayment.creditCard.billingCity" class="form-control" />
          </div>
          <div class="col-sm-3">
            <label>State</label>
              <select ng-model="currentPayment.creditCard.billingState" class="form-control">
                  <option value="AL">Alabama</option>
                  <option value="AK">Alaska</option>
                  <option value="AZ">Arizona</option>
                  <option value="AR">Arkansas</option>
                  <option value="CA">California</option>
                  <option value="CO">Colorado</option>
                  <option value="CT">Connecticut</option>
                  <option value="DE">Delaware</option>
                  <option value="DC">District Of Columbia</option>
                  <option value="FL">Florida</option>
                  <option value="GA">Georgia</option>
                  <option value="HI">Hawaii</option>
                  <option value="ID">Idaho</option>
                  <option value="IL">Illinois</option>
                  <option value="IN">Indiana</option>
                  <option value="IA">Iowa</option>
                  <option value="KS">Kansas</option>
                  <option value="KY">Kentucky</option>
                  <option value="LA">Louisiana</option>
                  <option value="ME">Maine</option>
                  <option value="MD">Maryland</option>
                  <option value="MA">Massachusetts</option>
                  <option value="MI">Michigan</option>
                  <option value="MN">Minnesota</option>
                  <option value="MS">Mississippi</option>
                  <option value="MO">Missouri</option>
                  <option value="MT">Montana</option>
                  <option value="NE">Nebraska</option>
                  <option value="NV">Nevada</option>
                  <option value="NH">New Hampshire</option>
                  <option value="NJ">New Jersey</option>
                  <option value="NM">New Mexico</option>
                  <option value="NY">New York</option>
                  <option value="NC">North Carolina</option>
                  <option value="ND">North Dakota</option>
                  <option value="OH">Ohio</option>
                  <option value="OK">Oklahoma</option>
                  <option value="OR">Oregon</option>
                  <option value="PA">Pennsylvania</option>
                  <option value="RI">Rhode Island</option>
                  <option value="SC">South Carolina</option>
                  <option value="SD">South Dakota</option>
                  <option value="TN">Tennessee</option>
                  <option value="TX">Texas</option>
                  <option value="UT">Utah</option>
                  <option value="VT">Vermont</option>
                  <option value="VA">Virginia</option>
                  <option value="WA">Washington</option>
                  <option value="WV">West Virginia</option>
                  <option value="WI">Wisconsin</option>
                  <option value="WY">Wyoming</option>
              </select>
          </div>
          <div class="col-sm-5">
            <label>Zip Code</label>
            <input type="text" ng-model="currentPayment.creditCard.billingZip" class="form-control" />
          </div>
        </div>
      </div>
    </div>

    <br />

    <table class="table">
      <thead>
      <tr>
        <th>Registrant</th>
        <th width="90">Cost</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="r in currentRegistration.registrants">
        <td>{{registrantName(r)}}</td>
        <td>{{r.calculatedTotalDue | moneyFormat}}</td>
      </tr>
      </tbody>
    </table>

    <div class="row">
      <div class="col-lg-12">
        <table class="table pull-right" style="width:300px;">
          <tr>
            <th>Total Cost</th>
            <td width="90">{{currentRegistration.calculatedTotalDue | moneyFormat}}</td>
          </tr>
          <tr ng-show="!currentRegistration.completed">
            <th>Payment</th>
            <td>{{currentPayment.amount | moneyFormat}}</td>
          </tr>
          <tr ng-show="currentRegistration.completed">
            <th>Payment(s)</th>
            <td>{{currentRegistration.totalPaid | moneyFormat}}</td>
          </tr>
          <tr ng-show="!currentRegistration.completed">
            <th>Remaining Balance</th>
            <td>{{(currentRegistration.calculatedTotalDue - currentPayment.amount) | moneyFormat}}</td>
          </tr>
          <tr ng-show="currentRegistration.completed">
            <th>Remaining Balance</th>
            <td>{{(currentRegistration.remainingBalance) | moneyFormat}}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="row" ng-show="!currentRegistration.completed">
  <div class="well">
    <p ng-show="!allRegistrantsValid()" style="color:red;">Please fill in all required fields in red before submitting.</p>
    <input type="button" class="btn-lg btn-success confirm-registration" ng-click="confirmRegistration()" value="Confirm" ng-disabled="registerMode === 'preview' || !allRegistrantsValid() || submittingRegistration">
    <span ng-show="registerMode === 'preview'">&laquo; Disabled in preview mode</span>
  </div>
</div>
<div class="row" ng-show="currentRegistration.completed">
  <div class="well">
    <input type="button" class="btn btn-small" onClick="window.print();" value="Print this page">
  </div>
</div>