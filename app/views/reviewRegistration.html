<div class="row" ng-show="currentRegistration.completed">
  <div class="well">
    <a class="btn btn-default pull-right" href="#/logout">Logout</a>
    <h4>You are registered!</h4>
    <p>Keep this information for your records.</p>
  </div>
</div>

<div class="row" ng-show="!currentRegistration.completed">
  <div class="well reg-not-complete">
    <h3>Your registration is not complete!</h3>
  </div>
</div>
<div class="row" ng-show="!currentRegistration.completed">
  <div class="well">
    <h4>Review Registration</h4>
    <p>Almost done. Please review your registration details below and click "Confirm" if correct.</p>
  </div>
</div>

<div class="row" ng-repeat="r in currentRegistration.registrants | orderBy: 'createdTimestamp'">
  <div class="well" ng-class="{'invalidBorder': regValidate[r.id].length}">
    <div class="pull-right" align="right" ng-show="currentRegistration.completed && conference.allowEditRegistrationAfterComplete">
      <input type="button" class="btn btn-small" ng-click="editRegistrant(r.id)" value="Edit">
    </div>

    <div class="pull-right" align="right" ng-show="!currentRegistration.completed">
      <input type="button" class="btn btn-small" ng-click="editRegistrant(r.id)" value="Edit">
      <input type="button" class="btn btn-small btn-danger" ng-click="removeRegistrant(r.id)" ng-show="conference.allowGroupRegistrations" value="Remove">

      <p class="registrantPrice">
        <strong ng-show="conference.registrantTypes.length > 1">{{getRegistrantType(r.registrantTypeId).name}}</strong>
        <span ng-show="r.totalDue"><br>${{r.totalDue}}</span>
      </p>
    </div>

    <dl ng-repeat="block in blocks" ng-class="{'invalidBlock': isBlockInvalid(r.id, block.id)}" ng-show="blockInRegType(block, r.registrantTypeId)">
      <dt>{{block.title}}</dt>
      <dd><show-answer block="block" registrant="r"></show-answer></dd>
    </dl>
  </div>
</div>

<div class="row" ng-show="!currentRegistration.completed && conference.allowGroupRegistrations">
  <div class="well">
    <p>Register another participant</p>
    <registration-type-select></registration-type-select>
  </div>
</div>

<div class="row" ng-show="!currentPayment.creditCard && !currentRegistration.completed && conference.acceptCreditCards && currentRegistration.calculatedMinimumDeposit > 0">
  <div class="well">
    <input type="button" class="btn btn-small pull-right btn-primary" ng-click="editPayment()" value="Enter Payment Details">
    <p>Payment details not found.</p>
    <p style="font-weight: bold;">Your registration is not complete until payment is made.</p>
  </div>
</div>

<div class="row" ng-show="currentPayment.creditCard && registerMode !== 'preview'">
  <div class="well">
    <div ng-show="!currentRegistration.completed">
      <input type="button" class="btn btn-small pull-right" ng-click="editPayment()" value="Edit payment details">
      <dl class="dl-horizontal">
        <dt>Payment amount</dt>
        <dd>
          <label>
          <input type="radio"
                 ng-model="currentPayment.amount"
                 ng-value="currentRegistration.calculatedMinimumDeposit">
          ${{currentRegistration.calculatedMinimumDeposit}}
          </label><br>
          <label ng-show="currentRegistration.calculatedTotalDue !== currentRegistration.calculatedMinimumDeposit">
            <input type="radio"
                   ng-model="currentPayment.amount"
                   ng-value="currentRegistration.calculatedTotalDue">
            ${{currentRegistration.calculatedTotalDue}}
          </label>
        </dd>

        <dt>Card</dt>
        <dd>****-****-****-{{currentPayment.creditCard.number.slice(-4)}}</dd>

        <dt>Expiration</dt>
        <dd>{{currentPayment.creditCard.expirationMonth}}/{{currentPayment.creditCard.expirationYear}}</dd>
      </dl>
    </div>

    <table class="table">
      <thead>
      <tr>
        <th>Registrant</th>
        <th width="90">Cost</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="r in currentRegistration.registrants">
        <td>{{registrantName(r)}}</td>
        <td>${{r.totalDue}}</td>
      </tr>
      </tbody>
    </table>

    <div class="row">
      <div class="col-lg-12">
        <table class="table pull-right" style="width:300px;">
          <tr>
            <th>Total Cost</th>
            <td width="90">${{currentRegistration.calculatedTotalDue}}</td>
          </tr>
          <tr>
            <th>Payment</th>
            <td>${{currentPayment.amount}}</td>
          </tr>
          <tr>
            <th>Remaining Balance</th>
            <td>${{currentRegistration.calculatedTotalDue - currentPayment.amount}}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="row" ng-hide="currentRegistration.completed || (currentRegistration.calculatedMinimumDeposit > 0 && !currentPayment.creditCard && conference.acceptCreditCards)">
  <div class="well">
    <p ng-show="!allRegistrantsValid()" style="color:red;">Please fill in all required fields in red before submitting.</p>
    <input type="button" class="btn-lg btn-success confirm-registration" ng-click="confirmRegistration()" value="Confirm" ng-disabled="registerMode === 'preview' || !allRegistrantsValid()">
    <span ng-show="registerMode === 'preview'">&laquo; Disabled in preview mode</span>
  </div>
</div>
<div class="row" ng-show="currentRegistration.completed">
  <div class="well">
    <input type="button" class="btn btn-small" onClick="window.print();" value="Print this page">
  </div>
</div>