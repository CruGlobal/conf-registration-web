<h2 class="page-title border">Registration Types</h2>
<p class="text-muted"><i class="fa fa-info-circle"></i> By setting up multiple registration types, you can charge different amounts and ask different questions depending on the type of registration. You can drag and drop these registrant types into the order that people registering will see them.</p>

<div ui-tree>
  <div ui-tree-nodes="" ng-model="conference.registrantTypes">
    <div ui-tree-node ng-repeat="type in conference.registrantTypes">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="row">
            <div class="col-md-3 col-md-push-9 text-right">
              <a href="" ng-click="openWell[type.id] = !openWell[type.id]"><i class="fa fa-inset fa-inset-reg-type" ng-class="{'fa-chevron-up': openWell[type.id], 'fa-chevron-down': !openWell[type.id]}"></i></a>
              <i class="fa fa-bars fa-inset fa-inset-reg-type" ui-tree-handle></i>
            </div>
            <div class="col-md-6 col-md-pull-3 stacked-spacing-col-md" ng-if="!type.defaultTypeKey">
              <label>Name <em class="required">*</em></label>
              <input type="text" class="form-control" ng-model="type.name">
            </div>
            <div class="col-md-6 col-md-pull-3 stacked-spacing-col-md" ng-if="type.defaultTypeKey">
              <label>Name</label>
              <p class="form-control-static">{{type.name}}</p>
            </div>
            <div class="col-md-3 col-md-pull-3 stacked-spacing-">
              <label>Cost <em class="required">*</em></label>
              <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-usd"></i></span>
                <input type="text" class="form-control" ng-model="type.cost">
              </div>
            </div>
          </div>
        </div>
        <div class="panel-body" collapse="!openWell[type.id]">
          <button class="btn btn-xs btn-danger reg-type-delete" ng-click="deleteRegType(type.id)"><i class="fa fa-trash-o"></i> Delete<span class="hidden-xs"> Registration Type</span></button>
          <div class="row">
            <div class="col-md-6">
              <h4>Registration Form</h4>
              <div class="input-group">
                <label>Description</label>
                <textarea class="form-control" ng-model="type.description"></textarea>
              </div>
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="type.hidden">
                  Hide from Registration Form
                </label>
                <i class="question-popover fa fa-question-circle"
                   popover="Hiding this type from the public registration form will require the participant to have a direct link in order to register. These links can be found on the Event Overview page."
                   popover-trigger="mouseenter"
                   popover-append-to-body="true">
                </i>
              </div>
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="type.useLimit">
                  Limit the number of registrants
                </label>
                <input type="number" class="form-control" ng-show="type.useLimit" ng-model="type.numberSlotsLimit">
              </div>

              <h4>Family Registration</h4>
              <div class="radio">
                <label>
                  <input type="radio" ng-model="type.familyStatus" value="DISABLED">
                  No
                </label>
                <i class="question-popover fa fa-question-circle"
                   popover="When selected, the user will not be given the option to add more people to the registration. One person per registration."
                   popover-trigger="mouseenter"
                   popover-append-to-body="true">
                </i>
              </div>
              <div class="radio">
                <label>
                  <input type="checkbox" ng-model="type.groupSubRegistrantType">
                  Family-only Registration Type
                </label>
                <i class="question-popover fa fa-question-circle"
                   popover="When selected, the user will be permitted to add more registrants (e.g. a spouse or child) to the registration."
                   popover-trigger="mouseenter"
                   popover-append-to-body="true">
                </i>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" ng-model="type.familyStatus" value="FAMILY_ONLY">
                  Yes - Dependent
                </label>
                <i class="question-popover fa fa-question-circle"
                   popover="When selected, this type will not become available until at least one registrant which has 'Family Registrations' set to 'Yes - Primary' has been added to the registration."
                   popover-trigger="mouseenter"
                   popover-append-to-body="true">
                </i>
              </div>
            </div>

            <div class="col-md-6">
              <h4>Payment</h4>
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="type.acceptCreditCards">
                  Accept Credit Cards
                </label>
                <i class="question-popover fa fa-question-circle"
                   popover="Enter credit card processing details under the Payment Options tab."
                   popover-trigger="mouseenter">
                </i>
              </div>
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="type.acceptChecks">
                  Accept Checks
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="type.acceptTransfers">
                  Accept Account Transfers
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input type="checkbox" ng-model="type.acceptScholarships">
                  Accept Scholarships
                </label>
              </div>

              <div class="min-payment input-group" ng-if="conference.requireLogin && anyPaymentMethodAccepted(type)">
                <label>Minimum Payment to Register</label>
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-usd"></i></span>
                  <input type="text" class="form-control marginless" ng-model="type.minimumDeposit">
                </div>
                <p class="text-muted"><i class="fa fa-info-circle"></i> If blank, full cost will be required at time of registration.</p>
              </div>

              <div class="min-payment" ng-show="!conference.requireLogin || !anyPaymentMethodAccepted(type)">
                <label>Minimum Payment to Register</label>
                <p class="text-muted" ng-show="!conference.requireLogin"><i class="fa fa-info-circle"></i> Registrants must be signed in order to accept multiple payments. Require sign in under the <a href ng-click="changeTab(tabs[1])">Registrant Options</a> tab.</p>
                <p class="text-muted" ng-show="!anyPaymentMethodAccepted(type)"><i class="fa fa-info-circle"></i> You must accept a at least one payment method in order to set a minimum payment.</p>
              </div>

              <hr>
              <div class="form-group">
                <div class="col-xs-12">
                  <h4>Early Registration Discount(s)</h4>
                </div>
              </div>
              <div class="form-group" ng-repeat="discount in type.earlyRegistrationDiscounts">
                <button class="btn btn-xs btn-default reg-discount-delete" ng-click="type.earlyRegistrationDiscounts.splice($index,1)"><i class="fa fa-trash-o"></i> Remove<span class="hidden-xs"> Discount</span></button>
                <div class="col-sm-8 stacked-spacing-col-sm">
                  <label>If registered by</label>
                  <crs-datetimepicker model="discount.deadline" ng-disabled="!discount.enabled"></crs-datetimepicker>
                </div>
                <div class="col-sm-4">
                  <label>Discount</label>
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-usd"></i></span>
                    <input type="text" class="form-control" ng-model="discount.amountOfDiscount" ng-disabled="!discount.enabled">
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="col-xs-12">
                  <a href="" ng-click="addEarlyRegistrationDiscount(type)">
                    <i class="fa fa-plus"></i> Add Discount
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="col-xs-12">
              <label>Confirmation Email</label>
              <i class="question-popover fa fa-question-circle"
                 popover="Your event name, start time and end time will be included in the email by default"
                 popover-trigger="mouseenter">
              </i>
              <wysiwyg textarea-class="form-control" ng-model="type.customConfirmationEmailText" enable-bootstrap-title="true"></wysiwyg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<a href="" ng-click="addRegType()">
  <i class="fa fa-plus"></i> Add Registration Type
</a>
